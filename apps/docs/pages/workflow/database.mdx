import { Steps } from 'nextra/components'

## ðŸ—„ï¸ Database

### ðŸ—ƒï¸ Extending database schema

Follow the steps below to extend your database schema.

> All commands can be ran from the top level (project root) directory.

<Steps>

### Define schema

Define your [Drizzle](https://drizzle.team) schema in `/packages/api/src/db/schema.ts`.

### Generate migration

Generate migration files using the `pnpm generate` command.

```bash
# Generate types & migrations
pnpm generate
```

### Run migrations

Run the schema migration using the `pnpm migrate:local` command.

```bash
# Migrate local database
pnpm migrate:local
# Migrate database hosted on Cloudflare D1
pnpm migrate
```

### Create seed data

Modify the .sql file at `/packages/api/seed/seed.sql` with your seed data. ChatGPT or faker.js are great tools for generating seed data.

### Seed data

Seed the database using `pnpm seed:local` command.

```bash
# Seed local database
pnpm seed:local
# Seed database hosted by Cloudflare D1
pnpm seed
```

</Steps>

To run the steps on the Cloudflare D1 hosted database, drop the `:local` suffix.

### ðŸ“¦ Migrations

Here are helpful commands for migrating your SQLite / Cloudflare D1 database schema.

```bash
# Generate migrations
pnpm generate

# Run migrations on local
pnpm migrate:local

# Run migrations on database hosted by Cloudflare D1
pnpm migrate
```

### ðŸ“¦ Seeding data

Here are helpful commands for seeding your SQLite / Cloudflare D1 database with data.

```bash
# Run seeding on local
pnpm seed:local
# Run seeding on production
pnpm seed
```
